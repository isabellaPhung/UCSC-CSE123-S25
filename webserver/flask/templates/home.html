<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
        }
        
        .left-section {
            width: 25%;
            border-right: 1px solid #ccc;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .middle-section {
            width: 50%;
            border-right: 1px solid #ccc;
            padding: 20px;
        }
        
        .right-section {
            width: 25%;
            padding: 20px;
        }
        
        .date-time {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .habits {
            margin-bottom: 30px;
        }
        
        h2 {
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .habit-list {
            min-height: 100px;
        }
        
        .deadlines-section {
            display: flex;
            flex-direction: column;
        }
        
        .header-with-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        
        .controls {
            display: flex;
            gap: 5px;
        }
        
        .control-btn {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 1px solid #ccc;
            background: #f5f5f5;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }
        
        .control-btn:hover {
            background: #e0e0e0;
        }
        
        .deadlines-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .deadlines-header h1 {
            margin: 0;
            font-size: 1.8em;
        }
        
        .section-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .tasks-container {
            display: flex;
        }
        
        .tasks-list {
            flex: 1;
        }
        
        .assigned-times {
            flex: 1;
            text-align: right;
        }
        
        .task-row, .time-row {
            padding: 8px 0;
            margin-bottom: 5px;
            cursor: pointer;
        }
        
        .task-row:hover, .time-row:hover {
            background-color: #f0f0f0;
        }
        
        .habits-link {
            color: #0066cc;
            text-decoration: none;
            font-weight: bold;
        }
        
        .habits-link:hover {
            text-decoration: underline;
        }
        
        .editable-input {
            border: 1px solid #ccc;
            border-radius: 3px;
            padding: 5px;
            width: 90%;
            font-family: inherit;
            font-size: inherit;
        }
        
        .habit-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            margin-bottom: 5px;
        }
        
        .habit-checkbox {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .habit-text {
            flex-grow: 1;
            cursor: pointer;
        }
        
        .habit-text:hover {
            background-color: #f0f0f0;
        }
        
        .events-container {
            display: flex;
            margin-bottom: 10px;
        }
        
        .event-name {
            flex-grow: 1;
            cursor: pointer;
            padding: 5px 0;
        }
        
        .event-name:hover {
            background-color: #f0f0f0;
        }
        
        .event-time {
            width: 90px;
            text-align: right;
            cursor: pointer;
            padding: 5px 0;
        }
        
        .event-time:hover {
            background-color: #f0f0f0;
        }
        
        .event-headers {
            display: flex;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .event-header-name {
            flex-grow: 1;
        }
        
        .event-header-time {
            width: 90px;
            text-align: right;
        }
    </style>
</head>
<body>
    <!-- Left Section - 1/4 width -->
    <div class="left-section">
        <div class="date-time">
            <h2>Date & Time</h2>
            <div id="current-date-time"></div>
        </div>
        
        <div class="habits">
            <h2><a href="habits.html" class="habits-link">Habits</a></h2>
            <div class="habit-list" id="main-habits-list">
                <!-- Habits will be dynamically loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Middle Section - 2/4 width -->
    <div class="middle-section">
        <div class="deadlines-section">
            <div class="deadlines-header">
                <div class="section-title">
                    <h1>Deadlines</h1>
                    <div class="controls">
                        <button class="control-btn add-task">+</button>
                        <button class="control-btn remove-task">-</button>
                    </div>
                </div>
                <div class="section-title">
                    <h1>Assigned Time</h1>
                    <div class="controls">
                        <button class="control-btn add-time">+</button>
                        <button class="control-btn remove-time">-</button>
                    </div>
                </div>
            </div>
            
            <div class="tasks-container">
                <div class="tasks-list" id="tasks-list">
                    <div class="task-row">Task1</div>
                    <div class="task-row">Task2</div>
                    <div class="task-row">Task3</div>
                    <div class="task-row">Task4</div>
                    <div class="task-row">Task5</div>
                    <div class="task-row">Task6</div>
                    <div class="task-row">Task7</div>
                    <div class="task-row">Task8</div>
                    <div class="task-row">Task9</div>
                </div>
                
                <div class="assigned-times" id="assigned-times">
                    <div class="time-row">9:00 AM</div>
                    <div class="time-row">10:30 AM</div>
                    <div class="time-row">12:00 PM</div>
                    <div class="time-row">1:30 PM</div>
                    <div class="time-row">3:00 PM</div>
                    <div class="time-row">4:30 PM</div>
                    <div class="time-row">6:00 PM</div>
                    <div class="time-row">7:30 PM</div>
                    <div class="time-row">9:00 PM</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Right Section - 1/4 width -->
    <div class="right-section">
        <div class="event-section">
            <div class="header-with-controls">
                <h2>Event</h2>
                <div class="controls">
                    <button class="control-btn add-event">+</button>
                    <button class="control-btn remove-event">-</button>
                </div>
            </div>
            <div class="event-headers">
                <div class="event-header-name">Event Name</div>
                <div class="event-header-time">Time</div>
            </div>
            <div id="events">
                <!-- Events will be dynamically loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Update date and time
        function updateDateTime() {
            const now = new Date();
            const dateTimeElement = document.getElementById('current-date-time');
            dateTimeElement.textContent = now.toLocaleString();
        }
        
        // Update every second
        setInterval(updateDateTime, 1000);
        updateDateTime(); // Initial call
        
        // Default habits array (shared between pages)
        const defaultHabits = [
            { text: "Morning Exercise", completed: false },
            { text: "Read 30 minutes", completed: false },
            { text: "Drink 8 glasses of water", completed: true },
            { text: "Plan next day", completed: false }
        ];
        
        // Default events array
        const defaultEvents = [
            { name: "Team Meeting", time: "2:00 PM" },
            { name: "Project Deadline", time: "5:00 PM" },
            { name: "Doctor Appointment", time: "9:30 AM" }
        ];
        
        // Load saved habits or use defaults
        function loadHabits() {
            let habits = JSON.parse(localStorage.getItem('habits')) || defaultHabits;
            const habitsList = document.getElementById('main-habits-list');
            habitsList.innerHTML = '';
            
            habits.forEach(habit => {
                const habitItem = document.createElement('div');
                habitItem.className = 'habit-item';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.className = 'habit-checkbox';
                checkbox.checked = habit.completed;
                checkbox.addEventListener('change', function() {
                    habit.completed = this.checked;
                    saveHabits(habits);
                });
                
                const habitText = document.createElement('div');
                habitText.className = 'habit-text';
                habitText.textContent = habit.text;
                habitText.addEventListener('click', function() {
                    makeEditableHabit(this, habits);
                });
                
                habitItem.appendChild(checkbox);
                habitItem.appendChild(habitText);
                habitsList.appendChild(habitItem);
            });
        }
        
        // Load saved events or use defaults
        function loadEvents() {
            let events = JSON.parse(localStorage.getItem('events')) || defaultEvents;
            const eventsList = document.getElementById('events');
            eventsList.innerHTML = '';
            
            events.forEach(event => {
                const eventContainer = document.createElement('div');
                eventContainer.className = 'events-container';
                
                const eventName = document.createElement('div');
                eventName.className = 'event-name';
                eventName.textContent = event.name;
                eventName.addEventListener('click', function() {
                    makeEditableEvent(this, 'name', events);
                });
                
                const eventTime = document.createElement('div');
                eventTime.className = 'event-time';
                eventTime.textContent = event.time;
                eventTime.addEventListener('click', function() {
                    makeEditableEvent(this, 'time', events);
                });
                
                eventContainer.appendChild(eventName);
                eventContainer.appendChild(eventTime);
                eventsList.appendChild(eventContainer);
            });
        }
        
        // Save habits to localStorage
        function saveHabits(habits) {
            localStorage.setItem('habits', JSON.stringify(habits));
        }
        
        // Save events to localStorage
        function saveEvents(events) {
            localStorage.setItem('events', JSON.stringify(events));
        }
        
        // Make habit text editable
        function makeEditableHabit(element, habitsArray) {
            const currentText = element.textContent;
            const input = document.createElement('input');
            input.type = 'text';
            input.value = currentText;
            input.className = 'editable-input';
            
            // Replace the element with the input
            element.textContent = '';
            element.appendChild(input);
            input.focus();
            
            // Save on enter or blur
            function saveEdit() {
                if (input.parentElement) {
                    const newText = input.value.trim() || currentText;
                    input.parentElement.textContent = newText;
                    
                    // Update the habits array
                    const habitItem = input.parentElement.parentElement;
                    const habitsList = habitItem.parentElement;
                    const index = Array.from(habitsList.children).indexOf(habitItem);
                    
                    if (index !== -1 && habitsArray[index]) {
                        habitsArray[index].text = newText;
                        saveHabits(habitsArray);
                    }
                    
                    input.parentElement.addEventListener('click', function() {
                        makeEditableHabit(this, habitsArray);
                    });
                }
            }
            
            input.addEventListener('blur', saveEdit);
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    saveEdit();
                }
            });
            
            // Remove the click event during editing
            element.removeEventListener('click', function() {
                makeEditableHabit(element, habitsArray);
            });
        }
        
        // Make event field editable
        function makeEditableEvent(element, field, eventsArray) {
            const currentText = element.textContent;
            const input = document.createElement('input');
            input.type = 'text';
            input.value = currentText;
            input.className = 'editable-input';
            
            if (field === 'time') {
                input.style.width = '80px';
            }
            
            // Replace the element with the input
            element.textContent = '';
            element.appendChild(input);
            input.focus();
            
            // Save on enter or blur
            function saveEdit() {
                if (input.parentElement) {
                    const newText = input.value.trim() || currentText;
                    input.parentElement.textContent = newText;
                    
                    // Update the events array
                    const eventContainer = input.parentElement.parentElement;
                    const eventsList = eventContainer.parentElement;
                    const index = Array.from(eventsList.children).indexOf(eventContainer);
                    
                    if (index !== -1 && eventsArray[index]) {
                        eventsArray[index][field] = newText;
                        saveEvents(eventsArray);
                    }
                    
                    input.parentElement.addEventListener('click', function() {
                        makeEditableEvent(this, field, eventsArray);
                    });
                }
            }
            
            input.addEventListener('blur', saveEdit);
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    saveEdit();
                }
            });
            
            // Remove the click event during editing
            element.removeEventListener('click', function() {
                makeEditableEvent(element, field, eventsArray);
            });
        }
        
        // Make elements editable on click
        function makeEditable(element) {
            const currentText = element.textContent;
            const input = document.createElement('input');
            input.type = 'text';
            input.value = currentText;
            input.className = 'editable-input';
            
            // Replace the element with the input
            element.textContent = '';
            element.appendChild(input);
            input.focus();
            
            // Save on enter or blur
            function saveEdit() {
                if (input.parentElement) {
                    const newText = input.value.trim() || currentText;
                    input.parentElement.textContent = newText;
                    input.parentElement.addEventListener('click', handleClick);
                }
            }
            
            input.addEventListener('blur', saveEdit);
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    saveEdit();
                }
            });
            
            // Remove the click event during editing
            element.removeEventListener('click', handleClick);
        }
        
        function handleClick(e) {
            if (e.target.classList.contains('task-row') || 
                e.target.classList.contains('time-row')) {
                makeEditable(e.target);
            }
        }
        
        // Initialize editable elements
        document.addEventListener('DOMContentLoaded', function() {
            // Load habits and events
            loadHabits();
            loadEvents();
            
            // Set up task and time editing
            document.querySelectorAll('.task-row, .time-row').forEach(item => {
                item.addEventListener('click', handleClick);
            });
        });
        
        // Task management
        document.querySelector('.add-task').addEventListener('click', function() {
            const tasksList = document.getElementById('tasks-list');
            const newTaskNumber = tasksList.children.length + 1;
            const newTask = document.createElement('div');
            newTask.className = 'task-row';
            newTask.textContent = `Task${newTaskNumber}`;
            newTask.addEventListener('click', handleClick);
            tasksList.appendChild(newTask);
        });
        
        document.querySelector('.remove-task').addEventListener('click', function() {
            const tasksList = document.getElementById('tasks-list');
            if (tasksList.children.length > 0) {
                tasksList.removeChild(tasksList.lastChild);
            }
        });
        
        // Time management
        document.querySelector('.add-time').addEventListener('click', function() {
            const timesList = document.getElementById('assigned-times');
            const newTime = document.createElement('div');
            newTime.className = 'time-row';
            
            // Generate a new time based on the last time
            const lastTime = timesList.lastChild ? timesList.lastChild.textContent : "8:00 AM";
            const newTimeValue = generateNextTime(lastTime);
            
            newTime.textContent = newTimeValue;
            newTime.addEventListener('click', handleClick);
            timesList.appendChild(newTime);
        });
        
        document.querySelector('.remove-time').addEventListener('click', function() {
            const timesList = document.getElementById('assigned-times');
            if (timesList.children.length > 0) {
                timesList.removeChild(timesList.lastChild);
            }
        });
        
        // Event management
        document.querySelector('.add-event').addEventListener('click', function() {
            const events = JSON.parse(localStorage.getItem('events')) || defaultEvents;
            events.push({ name: `New Event ${events.length + 1}`, time: "12:00 PM" });
            saveEvents(events);
            loadEvents();
        });
        
        document.querySelector('.remove-event').addEventListener('click', function() {
            const events = JSON.parse(localStorage.getItem('events')) || defaultEvents;
            if (events.length > 0) {
                events.pop();
                saveEvents(events);
                loadEvents();
            }
        });
        
        // Helper function to generate next time
        function generateNextTime(timeStr) {
            // Parse time string like "9:00 AM" or "1:30 PM"
            const [time, period] = timeStr.split(' ');
            let [hours, minutes] = time.split(':').map(Number);
            
            // Add 1.5 hours
            minutes += 30;
            if (minutes >= 60) {
                hours += 1;
                minutes -= 60;
            }
            hours += 1;
            
            // Handle period change
            let newPeriod = period;
            if (hours > 12) {
                hours -= 12;
                newPeriod = period === 'AM' ? 'PM' : 'AM';
            }
            if (hours === 12) {
                newPeriod = period === 'AM' ? 'PM' : 'AM';
            }
            
            return `${hours}:${minutes.toString().padStart(2, '0')} ${newPeriod}`;
        }
    </script>
</body>
</html>